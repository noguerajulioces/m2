<div class="row">
  <div class="col-lg-4 col-md-5 pe-xl-4 mb-5">
    <%= render "shared/profile" %>
  </div>

  <div class="col-lg-8 col-md-7 mb-5">
    <h1 class="h2">Password &amp; Seguridad</h1>
    <p class="pt-1">Administre la configuración de su contraseña y asegure su cuenta.</p>
    
    <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { class: 'needs-validation pd-4', method: :put }) do |f| %>
      <div class="row align-items-end mb-2">
        <div class="col-sm-6 mb-2">
          <%= f.label :email, class: 'form-label' %>
          <%= f.email_field :email, autofocus: true, autocomplete: "email", class: 'form-control', :disabled => true %>
        </div>
        <div class="col-sm-6 mb-2">
          <%= f.label :current_password, class: 'pass-input' %>
          <%= f.password_field :current_password, autocomplete: "current-password", class: 'form-control' %>
        </div>
      </div>

      <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
        <div> Actualmente está pendiente de confirmación: <%= resource.unconfirmed_email %></div>
      <% end %>

      <div class="row align-items-end mb-2">
        <div class="col-sm-6 mb-2">
          <%= f.label :password, class: 'pass-input' %>
          <%= f.password_field :password, autocomplete: "new-password", class: 'form-control' %>
        </div>
        <div class="col-sm-6 mb-2">
          <%= f.label :password_confirmation, class: 'pass-input' %><br />
          <%= f.password_field :password_confirmation, autocomplete: "new-password", class: 'form-control' %>
        </div>
      </div>
      
      <div class="d-flex align-items-center justify-content-between border-top mt-4 pt-4 pb-1">
        <%= f.submit class: 'btn btn-outline-primary' %>
        <%= link_to '<i class="fi-trash me-2"></i> Eliminar Cuenta'.html_safe, registration_path(resource_name), class: 'btn btn-link btn-sm px-0' %>
      </div>
    <% end %>

    <div class="border-top pt-4 mt-3"></div>

      <% resource.user_devices.each do |device| %>

        <h2 class="h5 pt-2 mb-4">Where you're signed in on</h2>
        <div class="d-flex border-bottom pb-3 mb-3"><i class="fi-device-desktop fs-5 text-muted me-1"></i>
          <div class="ps-2">
            <div class="fw-bold mb-1">Mac – New York, USA</div><span class="d-inline-block fs-sm text-muted border-end pe-2 me-2">Chrome</span><span class="fs-sm fw-bold text-success">Active now</span>
          </div>
        </div>
        <div class="d-flex border-bottom pb-3 mb-3"><i class="fi-device-mobile fs-5 text-muted me-1"></i>
          <div class="ps-2">
            <div class="fw-bold mb-1">iPhone 12 – New York, USA</div><span class="d-inline-block fs-sm text-muted border-end pe-2 me-2">Finder App</span><span class="fs-sm text-muted">20 hours ago</span>
          </div>
          <div class="align-self-center ms-auto">
            <div class="dropdown">
              <button class="btn btn-icon btn-light btn-xs rounded-circle shadow-sm" type="button" id="contextMenu1" data-bs-toggle="dropdown" aria-expanded="false"><i class="fi-dots-vertical"></i></button>
              <ul class="dropdown-menu pb-3 my-1" aria-labelledby="contextMenu1">
                <li><a class="dropdown-item text-body" href="#">Not you?</a></li>
                <li><a class="d-block px-3" href="#">Sign out</a></li>
              </ul>
            </div>
          </div>
        </div>
        <p>
          <%= device.properties['browser_name'] %>
          (<%= device.properties['browser_version'] %>)<br>
          <%= device.properties['os_name'] %>
          <%= device.updated_at %>
          <% if device.session_id == rack_session_id %>
            <strong><em>active</em></strong>
          <% else %>
            <%= button_to 'delete', device, method: :delete %>
          <% end %>
        </p>
      <% end %>
  </div>
</div>